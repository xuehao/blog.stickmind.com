Title: Roberts.CS1.C 库文件的使用
Slug: how-to-use-roberts-cs1-c
Lang: zh-CN
Authors: xuehao
Date: 2019-12-22 00:24
Modified: 2021-06-30 7:04
Summary: 学习使用《C 语言的科学和艺术》 与 《C 程序设计的抽象思维》 两本书用到的库。
Category: 笔记
Tags: C Programming, Computer Science, Data Structures, Algorithms
Status: published

**《C 语言的科学和艺术》** 与 **《C 程序设计的抽象思维》** 两本书用到的库。

## 1. 如何编译库文件？

按如下步骤，创建一个个人 _root_ 系统（避免系统权限）以及两本书中用到的 _libcs.a_ 静态库。

下载该仓库到个人电脑。

```shell
$ git clone https://github.com/xuehao/Roberts.CS1.C.git
```

进入 _cslib_ 文件夹。执行 _make_ 命令，生成库文件。

```shell
$ cd Roberts.CS1.C && cd cslib
$ make
```

如果成功，此时会生成一个 _root_ 文件夹。复制 _root_ 文件到个人目录。

```shell
$ mv root ~ # 如果之前已经建立 root 系统，请手动复制对应目录文件
```

## 2. 如何连接库文件？

把构建 C 程序用到的编译器选项和连接器选项打包放进通用 _Makefile_ 中。

```
CC = gcc
CFLAGS = -I${HOME}/root/include/cs -g -Wall -std=gnu11 -O3
LDLIBS = -L${HOME}/root/lib/ -lcs -lm
```

使用 _test-cslib_ 中的通用 _Makefile_ 文件编译 _house.c_ 测试程序，看看如何连接库文件。

```shell
$ cd .. && cd test-cslib
$ make house
$ ./house
```

此时会生成名为 _graphics.ps_ 的图像文件。
